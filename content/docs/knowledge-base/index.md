---
title: "Knowledge Base"
menu:
  docs_home:
    name: Knowledge Base
    pre: library
  docs:
    parent: "Help"
    name: "Knowledge Base"
---

## Custom Ids

In order to provide optimal integratability, you can work with custom ids on all resources. When
creating these resources, you can pass an id property to the payload. You can then retrieve that
resource by its custom id: eg. `GET /users/test-bot-1`. Valid ids must match `^\[\w-\]+$`
(alpha-numeric, -, _). If you do not provide a custom id, a UUIDv4 will be generated by default.

---

## Custom Properties

Our API resources [User](#user-resource) and [Channel](#channel-resource) have a `properties` field, that can be used
to store key value pairs to RealMQ objects.

**Example Channel Properties:**
```json
{
  "id": "test-channel",
  "properties": {
    "type": "group-chat",
    "memberCount": 46,
    "moderators": [{
      "id": "mod-user"
    }]
  }
}
```

---

## Paginated Lists

Paginated bulk-fetch functionality via listing API methods is supported by all top-level API resources.<br>
For example, you can list users (`GET /users`) or list channels (`GET /channels`), etc...<br>
These listing API methods share a common response structure and take at least these two parameters: `limit`, `offset`.<br>

{{% pt %}}
| **Paginated List** | _<small>Our generalized list response</small>_ |
|-----------:|-------------|
| {{< p "total" "Int" >}} | The amount of accessible items |
| {{< p "count" "Int" >}} | The number of items in this response |
| {{< p "offset" "Int" >}} | Start position of the slice relative to all accessible items |
| {{< p "limit" "Int" >}} | The considered slice limit<br>(**min**: 0, **max**: 100, **default**: 20) |
| {{< p "items" "Array" >}} | The list of fetched objects |
{{% /pt %}}

**Example User List:**
```json
{
  "total": 1026,
  "count": 1,
  "offset": 1025,
  "limit": 20,
  "items": [{
    "id": "test-user",
    "properties": {},
    "isOnline": true,
    "createdAt": "{{< isodate >}}",
    "updatedAt": "{{< isodate >}}"
  }]
}
```

---

## User Resource

A user may be a human, bot, sensor, server etc. and is able to participate in channel communications.

{{% pt %}}
| **User Schema** | _<small></small>_ |
|-----------:|-------------|
| {{< p "id" "String" >}} | A [Custom Id](#custom-ids) or autogenerated UUIDv4 |
| {{< p "properties" "Object" >}} | A map of [Custom Properties](#custom-properties) |
| {{< p "isOnline" "Boolean" >}} | Whether the user is currently connected to the real-time broker. |
| {{< p "createdAt" "DateTime" >}} | Iso date time of initial creation. |
| {{< p "updatedAt" "DateTime" >}} | Iso date time of last update. |
{{% /pt %}}

**Example User:**
```json
{
  "id": "test-user",
  "properties": {},
  "isOnline": true,
  "createdAt": "{{< isodate >}}",
  "updatedAt": "{{< isodate >}}"
}
```

---

## Channel Resource

Channels are used to broadcast messages. A user may be subscribed to multiple channels.

{{% pt %}}
| **Channel Schema** | _<small></small>_ |
|-----------:|-------------|
| {{< p "id" "String" >}} | A [Custom Id](#custom-ids) or autogenerated UUIDv4 |
| {{< p "properties" "Object" >}} | A map of [Custom Properties](#custom-properties) |
| {{< p "features" "Object" >}}| A feature configuration for this channel |
| {{< p "features.persistence" "Object" >}}| Persistence settings for this channel |
| {{< p "features.persistence.enabled" "Boolean" >}}| Whether or not to persist messages for this channel |
| {{< p "features.persistence.duration" "Boolean" >}}| Period for how long messages are stored for this channel |
| {{< p "createdAt" "DateTime" >}} | Iso date time of initial creation. |
| {{< p "updatedAt" "DateTime" >}} | Iso date time of last update. |
{{% /pt %}}

**Example Channel:**
```json
{
  "id": "test-channel",
  "properties": {},
  "features": {
    "persistence": {
      "enabled": true,
      "duration": "7d"
    }
  },
  "createdAt": "{{< isodate >}}",
  "updatedAt": "{{< isodate >}}"
}
```

---

## Subscription Resource

A subscription describes the access rights of user on channels. Without a subscription a user can
not send or receive messages on a channel.

{{% pt %}}
| **Subscription Schema** | _<small></small>_ |
|-----------:|-------------|
| {{< p "id" "String" >}} | A [Custom Id](#custom-ids) or autogenerated UUIDv4 |
| {{< p "channelId" "String" >}} | [Channel](#channel-resource) reference |
| {{< p "userId" "String" >}} | [User](#user-resource) reference |
| {{< p "allowRead" "Boolean" >}} | Whether the user is allowed to read messages from the channel. |
| {{< p "allowWrite" "Boolean" >}} | Whether the user is allowed to publish messages to the channel |
| {{< p "createdAt" "DateTime" >}} | Iso date time of initial creation. |
| {{< p "updatedAt" "DateTime" >}} | Iso date time of last update. |
{{% /pt %}}

**Example Subscription:**
```json
{
  "id": "test-subscription",
  "channelId": "test-channel",
  "userId": "test-user",
  "allowRead": true,
  "allowWrite": false,
  "createdAt": "{{< isodate >}}",
  "updatedAt": "{{< isodate >}}"
}
```

---

## Auth Token Resource

A token is issued for one user and grants scope specific REST- & real-time API access rights.

{{% pt %}}
| **Token Schema** | _<small></small>_ |
|-----------:|-------------|
| {{< p "id" "String" >}} | A [Custom Id](#custom-ids) or autogenerated UUIDv4 |
| {{< p "scope" "String" >}} | Possible values are `admin` and `user`. |
| {{< p "userId" "String" >}} | [User](#user-resource) reference |
| {{< p "token" "String" >}} | Random security token. |
| {{< p "isOnline" "Boolean" >}} | Whether this token is currently connected to the real-time broker. |
| {{< p "description" "String" >}} | Auth token description |
| {{< p "createdAt" "DateTime" >}} | Iso date time of initial creation. |
| {{< p "updatedAt" "DateTime" >}} | Iso date time of last update. |
{{% /pt %}}

**Example Token:**
```json
{
  "id": "test-token",
  "scope": "user",
  "userId": "test-user",
  "token": "PBCTpLPZkJkpMnA/kV2dgLfNDjgIAcF=",
  "isOnline": true,
  "description": "Some optional desc.",
  "createdAt": "{{< isodate >}}",
  "updatedAt": "{{< isodate >}}"
}
```
